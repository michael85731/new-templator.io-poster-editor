<!DOCTYPE HTML>
<html>
<head>
<!-- meta info -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- import js & css -->
<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="css/controlPoint.css">
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script type="text/javascript" src="js/transTextarea.js"></script>
<script type="text/javascript" src="js/draggable.js"></script>
<script type="text/javascript" src="js/resize.js"></script>
<script type="text/javascript" src="js/text.js"></script>
<script type="text/javascript" src="js/pic.js"></script>
</head>

<!-- ////////////////////////////// CSS //////////////////////////////////////// -->

<style type="text/css">

.posterArea {
    position: relative;
    width: 500px;
    height: 500px;
    border: 1px solid gray;
    background-color: #E0F0FF;
}

.drag {
    position: absolute;
    cursor: default;
    border:1px solid black;
}

.pic{
    position: absolute;
    width: 150px;
    height:150px;
    border: 1px solid gray;
}


</style>

<!-- ///////////////////////////// html /////////////////////////////// -->

<body>

<div>others1</div>
<div>others2</div>
<!-- id will replace to class(poster area css) -->
<div class="posterArea">
	<div class="drag">posterText1</div>
	<div class="drag">posterText2</div>
	<div class="drag">posterText3</div>
	<div class="drag">posterText4<br>posterText4.1</div>
</div>
<button onclick="addText()">add Text</button>

<input type="file">

<button onclick="test()">testing</button>
<div>others3</div>
<div>others4</div>

</body>

<!-- //////////////////////// js code //////////////////////////////////// -->

<script type="text/javascript">

$(document).ready(function(){
    $("input[type=file]").change(function(){
        loadPic(this);
    });

    //posterArea's event setting
    draggableAll();
    $(".posterArea").on('dblclick mousedown resize click',function(event){
        
        //判斷目前event.target的類型
        if($(event.target).find('img').length){
            
            //目前為pic(img) event
            switch(event.type){
                case 'resize':
                    resizePic(event.target);
                    break;
                case 'mousedown':
                    singleResizable($(event.target).parent());
                    break;
            }

        }else{

            //目前為text(div) event
            switch(event.type){
                case 'resize':
                    resizeText(event.target);       //偵測resize，設定resize時的text大小
                    break;
                case 'dblclick':
                    transToTextarea(event.target);  //偵測dblclick，將之轉換成textarea
                    break;
                case 'mousedown':
                    singleResizable(event.target);    //偵測到mousedown or click，讓文字resizable
                    break;
                case 'click':
                    cancelResizePoint();     
            }
        }

    });
});

</script>

</html>
